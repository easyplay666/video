<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<title>视频录制程序（稳定横竖屏）</title>
<style>
body { font-family: Arial; text-align: center; }
video { width: 320px; background: black; }
button, select { margin: 5px; padding: 10px 15px; }
button:disabled { opacity: 0.4; }
#timer { font-size: 18px; margin: 10px; }
#download { display: none; margin-top: 10px; }
</style>
</head>
<body>

<h2>视频录制程序（稳定横竖屏 + 毫秒计时）</h2>

<video id="preview" autoplay muted playsinline></video>
<div>
  <label for="orientation">画面方向：</label>
  <select id="orientation">
    <option value="landscape">横屏 16:9</option>
    <option value="portrait">竖屏 9:16</option>
  </select>
</div>

<canvas id="canvas" style="display:none;"></canvas>

<div id="timer">00:00.000</div>

<div>
  <button id="startBtn">开始录制</button>
  <button id="pauseBtn" disabled>暂停</button>
  <button id="resumeBtn" disabled>继续</button>
  <button id="stopBtn" disabled>停止</button>
</div>

<a id="download" href="#" download="recording.webm">⬇ 下载录制的视频</a>

<script>
const preview = document.getElementById("preview");
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
const startBtn = document.getElementById("startBtn");
const pauseBtn = document.getElementById("pauseBtn");
const resumeBtn = document.getElementById("resumeBtn");
const stopBtn = document.getElementById("stopBtn");
const timerDisplay = document.getElementById("timer");
const downloadLink = document.getElementById("download");
const orientationSelect = document.getElementById("orientation");

let stream, mediaRecorder, recordedChunks = [];
let drawing = false;
let timerInterval, startTime = 0;

/* ===== 横竖屏设置 ===== */
function setCanvasSize() {
  if (orientationSelect.value === "portrait") {
    canvas.width = 720; canvas.height = 1280;
  } else {
    canvas.width = 1280; canvas.height = 720;
  }
}

orientationSelect.on
